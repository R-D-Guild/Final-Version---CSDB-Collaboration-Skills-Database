<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verification Pending Page</title>
</head>
<body style=" background-color: #171717;">
    <!-- verification-pending.html -->
<center><h1 style="color: snow; ">Verify Your Email <img src="Assests/partners-img6-hover.svg" style="color: white; filter: brightness(0) invert(1);" width="80" alt=""></h1></center>
<center><h2 style="color: snow;">We have sent a verification link to your email. Please verify your email before proceeding to log in.</h2></center>
<center><button id="resendVerificationEmail">Resend Verification Email</button></center>
<p id="resendMessage"></p>

<script>
  const resendButton = document.getElementById('resendVerificationEmail');
  const resendMessage = document.getElementById('resendMessage');

  resendButton.addEventListener('click', async () => {
    resendMessage.textContent = ''; // Clear previous message

    const email = localStorage.getItem('pendingVerificationEmail'); // Retrieve the email used for signup
    
    try {
      const { error } = await supabase.auth.api.resetPasswordForEmail(email);  // Use Supabase's API to resend email

      if (error) {
        resendMessage.textContent = 'Error resending verification email: ' + error.message;
      } else {
        resendMessage.style.color = 'green';
        resendMessage.textContent = 'Verification email sent again! Please check your inbox.';
      }
    } catch (err) {
      resendMessage.textContent = 'Something went wrong. Please try again later.';
    }
  });

  // Redirect to login after some time (optional)
  setTimeout(() => {
    window.location.href = '/login.html';  // Redirect to login page after a delay
  }, 10000);  // Wait 10 seconds before redirecting
</script>

</body>
</html>