var e=globalThis,t={},r={},s=e.parcelRequire3d38;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in r){var s=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,s.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequire3d38=s),s.register;var a=s("iAutD");console.log(a.supabase);const n=document.getElementById("logInEmail"),o=document.getElementById("logInPassword"),i=document.getElementById("loginMessage"),l=document.getElementById("logInFormDetails"),d=document.getElementById("togglePassword"),c=e=>{i.textContent=e,i.classList.add("alert","shake"),i.style.display="block",setTimeout(()=>{i.style.display="none",i.classList.remove("shake")},5e3)},u=()=>{i.style.display="none",i.classList.remove("shake")},m=()=>{"undefined"!=typeof hcaptcha&&hcaptcha.reset()};d.addEventListener("click",()=>{"password"===o.getAttribute("type")?(o.setAttribute("type","text"),d.innerHTML='<i class="fa-solid fa-eye-slash"></i>'):(o.setAttribute("type","password"),d.innerHTML='<i class="fa-solid fa-eye"></i>')}),l.addEventListener("submit",async e=>{e.preventDefault();let t=n.value.trim(),r=o.value.trim();if(u(),!t||!r){c("Email and password are required.");return}if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t)){c("Please enter a valid email address.");return}let s=hcaptcha.getResponse();if(!s){c("Please complete the CAPTCHA.");return}try{let{data:e,error:n}=await (0,a.supabase).auth.signInWithPassword({email:t,password:r,options:{captchaToken:s}});if(n){console.error("Supabase Error:",n),n.message.includes("Invalid login credentials")?c("Incorrect email or password. Please try again."):c("Login failed: "+n.message),m();return}if(!e.user){c("Error: Could not retrieve user information.");return}setTimeout(()=>{i.style.color="green",i.textContent="Login successful! Redirecting...",window.location.href="members/templates/members/members_list.html"},3e3)}catch(e){console.error("Unexpected Error:",e),c("Something went wrong. Please try again later."),m()}});
//# sourceMappingURL=login.b8bce67b.js.map
